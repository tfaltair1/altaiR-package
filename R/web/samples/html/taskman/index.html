<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<link href="style/smoothness/jquery-ui-1.9.2.custom.css" rel="stylesheet" type="text/css">
		<link href="style/style.css" rel="stylesheet" type="text/css">
		<link href="style/main.css" rel="stylesheet" type="text/css">
		<title>Task Manager</title>
	</head>
	<body>
		<div id="errormessages-holder" class="ui-widget ui-helper-hidden">
			<div id="errormessages" class="ui-corner-bottom ui-state-error"></div>
		</div>
		<div id="outer" class="ui-helper-hidden">
			<div id="inner" class="ui-widget ui-corner-all">
				<div class="ui-widget-header ui-corner-top">
					<h3>Task Manager</h3>
					<a href="#" id="btn-create-new-task">New Task</a>
					<span id="account-logout-holder">
						<span id="account-info"></span>
						<a href="#" class="ui-priority-secondary" id="btn-logout">Logout</a>
					</span>
				</div>
				<div id="accordion">
					<h3>Instructions</h3>
					<div class="ui-widget-content ui-corner-bottom" id="instructions">
						<div>
<!-- System Description Start -->
<h4>System Description</h4>
<p>
This application demonstrates how WPS Web's session support can be combined with modern web technologies to create a
sophisticated web application.</p>
<p>
The application provides a thick client, written in Javascript, which is executed by a user's web browser in order to
render the interface and make AJAX calls to a WPS Web Broker in order to execute language of SAS programs. These
programs perform tasks like creating a session for the user and creating new tasks which are stored against that
session.
</p>
<p>The AJAX requests are like the form submissions seen in other examples, and contain similar like parameters to
identify:
<ul>
	<li>the language of SAS program to execute on the Application Server</li>
	<li>the WPS Web server to use</li>
	<li>the session id</li>
</ul>
Plus any extra parameters needed for the particular program being executed.
<p>
The AJAX request is made to the CGI Broker, which begins the interaction to execute the required program using the WPS
Web framework. The program responses with JSON text which is used by the thick client to update the interface. These
interactions can be seen through browser's development tools which allow inspection of AJAX requests.
</p>
<p>
The following sub-sections focus on a specific aspect of the application and how it works.
</p>
<h5>Login</h5>
<p>
When the user logs into the system, the client program makes a request to the Broker to run the 'login.sas' program on an
Application Server. This creates a session and stores information against it, primarily the users name and a blank list
of tasks (represented as a DataSet). The client then goes through a procedure to get extra information which it uses to
produce the view.
</p>

<h5>Creating tasks</h5>
<p>
The user can then create tasks through the New Task button. When the form is submitted, the client program makes an AJAX
request to invoke the 'Create Task' program on the same Application Server which created the Session. This is vital as
sessions are not shared between Application Servers. If successful, the client will automatically update then list of
tasks displayed on the UI. A similar process tasks place to remove tasks.
</p>

<h5>Filtering and sorting</h5>
<p>
The user can filter and sort the list of tasks using controls on the UI. These change various parameters which are sent
to the Application Server which runs the program to produce the list of tasks. Although this is only a simple example,
sorting and filtering, it shows a way that the power of WPS can be leveraged for complicated tasks.
</p>

<h5>Logout</h5>
<p>
When the user clicks the logout button, the client program will issue an AJAX request to delete the Session on the
Application Server being used. Its not concerned with whether this succeeds or not as the Session will eventually time
out anyway but its polite to inform Application Server that its no longer in use. The client then resets the UI and
drops all previous information about any Application Server or Session, returning it to the pre-login state.
</p>

<!-- System Description End -->
						</div>
					</div>
					<h3>Search</h3>
					<div>
						<form id="filterform" class="form1">
							<fieldset>
								<p>
									<label for="filter">Description contains:</label>
									<span>
										<input id="filter" name="filter" />
									</span>
								</p>
								<p class="buttons-holder">
									<a href="#">Filter</a>
								</p>
							</fieldset>
						</form>
					</div>
				</div>
				<div id="table-holder"></div>
			</div>
		</div>
		<script src="js/jquery-min.js" type="text/javascript"></script>
		<script src="js/jquery-ui.js" type="text/javascript"></script>
		<script src="js/json2.js" type="text/javascript"></script>
		<script src="js/underscore-min.js" type="text/javascript"></script>
		<script src="js/backbone-min.js" type="text/javascript"></script>
		<script src="js/models.js" type="text/javascript"></script>
		<script src="js/template-manager.js" type="text/javascript"></script>
		<script src="js/config.js" type="text/javascript"></script>
		<script src="js/main.js" type="text/javascript"></script>
		<div id="logindialog" title="Login">
			<form class="form1">
				<fieldset>
					<p>
						<label for="txt_fname">Firstname:</label>
						<span>
							<input name="txt_fname" id="txt_fname" />
						</span>
					</p>
					<p>
						<label for="txt_sname">Surname:</label>
						<span>
							<input name="txt_sname" id="txt_sname" />
						</span>
					</p>
				</fieldset>
			</form>
		</div>
		<div id="newtaskdialog" title="Create new task" class="ui-helper-hidden">
			<form class="form1">
				<fieldset>
					<p>
						<label for="txt_type">Type:</label>
						<span>
							<select name="txt_type" id="txt_type">
								<option>Meeting</option>
								<option>Travel</option>
								<option>Conference Call</option>
								<option>Write Report</option>
							</select>
						</span>
					</p>
					<p>
						<label for="txt_description">Description:</label>
						<span>
							<textarea name="txt_description" id="txt_description">
							</textarea>
						</span>
					</p>
					<p>
						<label for="num_priority">Priority:</label>
						<span>
							<input name="num_priority" />
						</span>
					</p>
				</fieldset>
			</form>
		</div>
	</body>
</html>
